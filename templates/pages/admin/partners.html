{% extends 'layouts/adminbase.html' %}

{% block title %}HOOP | Partners{% endblock %}

{% block header %}
<h2>Partners
    <a href="{{ url_for('admin_index') }}" title="Back to homepage"><i class="fa fa-home pull-right"></i></a>
</h2>
{% endblock %}

{% block content %}

{% for message in get_flashed_messages() %}
<div class=flash>
    {{ message }}
</div>
{% endfor %}

{% if is_search %}
{% if (response.count > 1) or (response.count == 0) %}
<h3>{{ response.count }} results for '{{ search_term }}'</h3>
{% else %}
<h3>{{ response.count }} result for '{{ search_term }}'</h3>
{% endif %}
{% endif %}

<table class="table table-hover table-bordered">

    <thead>
        <tr>
            <th>S/N</th>
            <th>Partner ID</th>
            <th>Partner Name</th>
            <th>Partner Contact</th>
            <th>Partner Address</th>
            <th></th>
        </tr>
    </thead>
    <tbody class="table-group-divider">
        {% if not is_search %}
        {% for partner in response: %}
        <tr>
            <td>{{ response.index(partner) + 1 }}</td>
            <td><a href="{{url_for('update_partner', partner_id=partner.partner_id) }}">{{ partner.partner_id }}</a>
            </td>
            <td>{{ partner.partner_name }}</td>
            <td>{{ partner.partner_contact }}</td>
            <td>{{ partner.partner_address }}</td>
            <td><a href="{{ url_for('delete_partner', partner_id=partner.partner_id) }}"
                    onclick="return confirm('Are you sure you want to delete this partner?');">❌</a></td>
        </tr>
        {% endfor %}
        {% else %}
        {% for partner in response['data']: %}
        <tr>
            <td>{{ response['data'].index(partner) + 1 }}</td>
            <td><a href="{{url_for('update_partner', partner_id=partner.partner_id) }}">{{ partner.partner_id }}</a>
            </td>
            <td>{{ partner.partner_name }}</td>
            <td>{{ partner.partner_contact }}</td>
            <td>{{ partner.partner_address }}</td>
            <td><a href="{{ url_for('delete_partner', partner_id=partner.partner_id) }}"
                    onclick="return confirm('Are you sure you want to delete this partner?');">❌</a></td>
        </tr>
        {% endfor %}
        {% endif %}
    </tbody>

</table>
{% endblock %}